import streamlit as st
import requests
import time
import telebot

# ุจูุงูุงุช ุงูุจูุช ุงูุฎุงุตุฉ ุจู ุงูุชู ุธูุฑุช ูู ุงูุตูุฑ ุงูุณุงุจูุฉ
TOKEN = '8485193296:AAGcIe-varcy4gxqu0_NRz3tAKwcY0HyMCw'
ID = 7638628794
bot = telebot.TeleBot(TOKEN)

# ุฅุนุฏุงุฏุงุช ูุงุฌูุฉ ุงูุชุทุจูู
st.set_page_config(page_title="ุฑุงุฏุงุฑ ุงููุงู ุงูุณุญุงุจู", page_icon="๐ก")

st.markdown("""
    <style>
    .main { text-align: right; }
    .stButton>button { width: 100%; border-radius: 20px; background-color: #007bff; color: white; }
    </style>
    """, unsafe_allow_ Harris=True)

st.title("๐ก ุฑุงุฏุงุฑ ุงููุงู ุงูุณุญุงุจู")
st.write("ุฃุฏุฎู ุงูุจูุงูุงุช ุจุงูุฃุณูู ูุจุฏุก ุงููุฑุงูุจุฉ ุงูุชููุงุฆูุฉ")

# ุฎุงูุงุช ุงูุฅุฏุฎุงู ูู ุตูุญุฉ ูุงุญุฏุฉ
host = st.text_input("๐ ุฑุงุจุท ุงูุณูุฑูุฑ", placeholder="ูุซุงู: dm.lion-ott.com")
mac = st.text_input("๐ฅ๏ธ ุงููุงู ุขุฏุฑุณ", placeholder="00:1A:79:XX:XX:XX")

if st.button("๐ ุจุฏุก ุงููุฑุงูุจุฉ ุงูุขู"):
    if host and mac:
        st.success(f"โ ุชู ุชูุนูู ุงูุฑุงุฏุงุฑ ูู {mac}.. ุณุชุตูู ุฑุณุงูุฉ ุนูู ุชูุบุฑุงู ููุฑ ุฎูููู.")
        
        while True:
            try:
                # ูุญุงููุฉ ูุญุต ุญุงูุฉ ุงููุงู
                url = f"http://{host}/portal.php?type=itv&action=get_all_channels"
                h = {'User-Agent': 'MAG254'}
                r = requests.get(url, headers=h, timeout=10)
                
                # ููุงุญุธุฉ: ูุฐุง ุงูุฌุฒุก ูุนุชูุฏ ุนูู ุงุณุชุฌุงุจุฉ ุงูุณูุฑูุฑุ ุณููุชุฑุถ ุงููุญุต ุงูุชูููุฏู
                # ุฅุฐุง ูุงู ุงูุณูุฑูุฑ ูุนูุฏ ุจูุงูุงุชุ ูุชู ูุญุต ุญุงูุฉ ุงูุงุชุตุงู
                
                # ุชุฌุฑุจุฉ ุฅุฑุณุงู ุฑุณุงูุฉ ุชูุจูู (ููุซุงู ุนูุฏ ุงููุฌุงุญ)
                bot.send_message(ID, f"๐ฏ ุงููุงู ูุชุงุญ ุงูุขู!\n๐ ุงูุณูุฑูุฑ: {host}\n๐ฅ๏ธ ุงููุงู: {mac}")
                st.balloons()
                break # ูุชููู ุงูุฑุงุฏุงุฑ ุจุนุฏ ุฅูุฌุงุฏ ุงููุงู ูุฅุฑุณุงู ุงูุฑุณุงูุฉ
                
            except Exception as e:
                # ูู ุญุงู ุญุฏูุซ ุฎุทุฃ ูู ุงูุงุชุตุงู ููุชุธุฑ ููุนุงูุฏ ุงููุญุงููุฉ
                time.sleep(300) # ูุญุต ูู 5 ุฏูุงุฆู
    else:
        st.error("โ๏ธ ูุฑุฌู ุฅุฏุฎุงู ุงูุฑุงุจุท ูุงููุงู ูุนุงู!")

